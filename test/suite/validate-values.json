[
  {
    "schema": {"fields": { "_": { } } },
    "tests": [
      {
        "record": [ {"tag":"_","value":"x"} ]
      }
    ]
  },
  {
    "description": "flat field with pattern",
    "schema": {"fields": { "_": {"pattern":"[0-9]"} } },
    "tests":[
      {
        "record": [{"tag":"_","value":"1"}] 
      },
      {
        "record": [{"tag":"_","value":"x"}],
        "errors": [
          { 
            "message": "Value 'x' does not match regex pattern '[0-9]'.",
            "pattern": "[0-9]",
            "error": "patternMismatch",
            "value": "x"
          }
        ]
      }
    ]
  },
  {
    "schema": {"fields": { "_": {"codes":{} } } },
    "tests": [
      {
        "record": [{"tag":"_","value":"x"}],
        "errors": [
          {
            "message": "Value 'x' is not defined in codelist.",
            "value": "x",
            "error": "undefinedCode"
          }
        ]
      },
      {
        "record": [{"tag":"_", "value":"x"}],
        "options": { "undefinedCode": false }
      }
    ]
  },{
    "description": "flat field with position",
    "schema": {
      "fields": { 
        "_": {
          "repeatable": true,
          "positions": { 
            "00": { "pattern": "[a-z]" }, 
            "01-02": { "pattern": "[a-z0-9]" } 
          } 
        } 
      } 
    },
    "tests":[
      {
        "record": [
          {"tag":"_","value":"ab0"},
          {"tag":"_","value":"xx9z"}
        ] 
      },
      {
        "record": [
          {"tag":"_","value":"9a"}
        ],
        "errors": [
          { 
            "message": "Value '9' does not match regex pattern '[a-z]'.",
            "pattern": "[a-z]",
            "error": "patternMismatch",
            "value": "9"
          },
          {
            "message": "Position 01-02 does not exist",
            "value": "9a",
            "error": "invalidPosition"
          }
        ]
      }
    ]
  }
]
