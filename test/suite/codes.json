[
  {
    "description": "validate with codes",
    "schema": {
      "codelists": {
        "languages": { 
          "codes": { "en": { }, "de": { } }
        }
      },
      "fields": {
        "lang": {
          "codes": "languages"
        },
        "bool": {
          "codes": { "yes": {}, "no": {} }
        },
        "wtf": {
          "codes": "xy"
        }
      }
    },
    "tests": [
      {
        "record": [ 
          { "tag": "lang", "value": "en" },
          { "tag": "bool", "value": "yes" }
        ]
      },{
        "record": [
          { "tag": "lang", "value": "deu" },
          { "tag": "bool", "value": "y" },
          { "tag": "wtf", "value": "xy" }
        ],
        "errors": [
          {
            "message": "Value 'deu' is not defined in codelist.",
            "value": "deu",
            "error": "AR15"
          },
          { 
            "message": "Value 'y' is not defined in codelist.",
            "value": "y", 
            "error": "AR15"
          },
          {
            "message": "Unknown codelist 'xy'.",
            "value": "xy",
            "error": "AR16"
          }
        ]
      },{
        "description": "ignore_codes",
        "record": [
          { "tag": "lang", "value": "deu" },
          { "tag": "bool", "value": "y" },
          { "tag": "wtf", "value": "xy" }
        ],
        "options": ["ignore_codes"]
      },{
        "description": "ignore_unknown_codelists",
        "record": [
          { "tag": "bool", "value": "y" },
          { "tag": "wtf", "value": "xy" }
        ],
        "options": ["ignore_unknown_codelists"],
        "errors": [
          {
            "message": "Value 'y' is not defined in codelist.",
            "value": "y",
            "error": "AR15"
          }
        ]
      }
    ]
  }
]
