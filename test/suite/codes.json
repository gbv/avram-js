[
  {
    "description": "validate with codes",
    "schema": {
      "codelists": {
        "languages": { 
          "codes": { "en": { }, "de": "German" }
        }
      },
      "fields": {
        "lang": {
          "codes": "languages"
        },
        "bool": {
          "codes": { "yes": {}, "no": {} }
        },
        "wtf": {
          "codes": "xy"
        }
      }
    },
    "tests": [
      {
        "record": [ 
          { "tag": "lang", "value": "en" },
          { "tag": "bool", "value": "yes" }
        ]
      },{
        "record": [
          { "tag": "lang", "value": "deu" },
          { "tag": "bool", "value": "y" },
          { "tag": "wtf", "value": "xy" }
        ],
        "errors": [
          {
            "message": "Value 'deu' is not defined in codelist.",
            "value": "deu",
            "error": "undefinedCode"
          },
          { 
            "message": "Value 'y' is not defined in codelist.",
            "value": "y", 
            "error": "undefinedCode"
          },
          {
            "message": "Unknown codelist 'xy'.",
            "value": "xy",
            "error": "undefinedCodelist"
          }
        ]
      },{
        "description": "-undefinedCode",
        "record": [
          { "tag": "lang", "value": "deu" },
          { "tag": "bool", "value": "y" },
          { "tag": "wtf", "value": "xy" }
        ],
        "options": { "undefinedCode": false }
      },{
        "description": "+undefinedCodelist",
        "record": [
          { "tag": "bool", "value": "y" },
          { "tag": "wtf", "value": "xy" }
        ],
        "options": { "undefinedCodelist": true },
        "errors": [
          {
            "message": "Value 'y' is not defined in codelist.",
            "value": "y",
            "error": "undefinedCode"
          }
        ]
      }
    ]
  }
]
