[
  {
    "schema": {
      "fields": {
        "A": { 
          "subfields": { "x": { "required": true, "pattern": "^[a-z]$" } },
          "required": true
        },
        "B": { "codes": { "x": {}, "y": {} } },
        "C": {
          "subfields": { "z": { "repeatable": true, "codes": { "x": {}, "y": {} } } }
        }
      }
    },
    "tests": [
      {
        "record": [
          { "tag": "A", "subfields": [] }, 
          { "tag": "A", "subfields": ["x", "1"] }, 
          { "tag": "Y", "occurrence": "1", "value": "" }
        ],
        "errors": [ 
          { "code": "x", "id": "A", "message": "Missing subfield 'x' in field 'A'.", "error": "missingSubfield" },
          {
            "message": "Value '1' does not match regex pattern '^[a-z]$'.",
            "error": "patternMismatch",
            "pattern": "^[a-z]$", "value": "1"
          },          
          { "identifier": "A", "message": "Field 'A' must not be repeated.", "error": "nonrepeatableField" },
          { "tag": "Y", "occurrence": "1", "message": "Unknown field 'Y/1'.", "error": "undefinedField" }
        ]
      },{
        "record": [
          { "tag": "A", "subfields": [] }, 
          { "tag": "A", "subfields": ["x", "1"] }, 
          { "tag": "Y", "occurrence": "1", "value": "" }
        ],
        "options": { "invalidRecord": false },
        "errors": []
      },{
        "record": [
          { "tag": "Y", "value": "" },
          { "tag": "B", "value": "z" },
          { "tag": "C", "subfields": ["z", " "] }
        ],
        "errors": [ 
          { 
            "tag": "Y", 
            "message": "Unknown field 'Y'.", 
            "error": "undefinedField"
          },
          {
            "message": "Value 'z' is not defined in codelist.",
            "value": "z",
            "error": "undefinedCode"
          },{
            "message": "Value ' ' is not defined in codelist.",
            "value": " ",
            "error": "undefinedCode"
          },
          { 
            "identifier": "A",
            "message": "Missing field 'A'.",
            "error": "missingField"
          }
        ]
      }
    ]
  },
  {
    "schema": { "fields": { "a": { "required": true } } },
    "tests": [ {
      "record": [ { "tag": "b" } ],
      "options": { "undefinedField": false },
      "errors": [
        {
          "error": "missingField",
          "identifier": "a",
          "message": "Missing field 'a'."
        }
      ]
    }, {
      "record": [ { "tag": "b" } ],
      "options": { "undefinedField": false, "missingField": false },
      "errors": [ ]
    } ]
  }
]
