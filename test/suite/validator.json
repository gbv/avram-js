[
  {
    "schema": {
      "fields": {
        "A": { 
          "subfields": { "x": { "required": true, "pattern": "^[a-z]$" } },
          "required": true
        },
        "B": { "codes": { "x": {}, "y": {} } },
        "C": {
          "subfields": { "z": { "repeatable": true, "codes": { "x": {}, "y": {} } } }
        }
      }
    },
    "tests": [
      {
        "record": [
          { "tag": "A", "subfields": [] }, 
          { "tag": "A", "subfields": ["x", "1"] }, 
          { "tag": "Y", "occurrence": "1", "value": "" }
        ],
        "errors": [ 
          { "code": "x", "message": "Missing subfield 'x'.", "violates": "AR9" },
          {
            "message": "Value '1' does not match regex pattern '^[a-z]$'.",
            "violates": "AR12",
            "pattern": "^[a-z]$", "value": "1"
          },          
          { "identifier": "A", "message": "Field 'A' must not be repeated.", "violates": "AR3" },
          { "tag": "Y", "occurrence": "1", "message": "Unknown field 'Y/1'.", "violates": "AR2" }
        ]
      },{
        "record": [
          { "tag": "Y", "value": "" },
          { "tag": "B", "value": "z" },
          { "tag": "C", "subfields": ["z", " "] }
        ],
        "errors": [ 
          { 
            "tag": "Y", 
            "message": "Unknown field 'Y'.", 
            "violates": "AR2"
          },
          {
            "message": "Value 'z' is not defined in codelist.",
            "value": "z",
            "violates": "AR15"
          },{
            "message": "Value ' ' is not defined in codelist.",
            "value": " ",
            "violates": "AR15"
          },
          { 
            "identifier": "A",
            "message": "Missing field 'A'.",
            "violates": "AR4"
          }
        ]
      }
    ]
  }
]
